{% extends "layout.html" %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1.5rem;">
  <div>
    <h3 style="margin: 0;">Images for {{ product.name }}</h3>
    <p class="text-muted" style="margin: 0; font-size: 0.875rem;">Add or remove image paths.</p>
  </div>
  <a class="btn btn-outline" href="{{ url_for('admin.products_list') }}">Back to Products</a>
</div>
<div class="card" style="padding: 1.5rem; margin-bottom: 1rem;">
  <form method="post" action="{{ url_for('admin.product_images_add', product_id=product.id) }}" style="display: flex; flex-wrap: wrap; gap: 0.5rem; align-items: end;">
    <div style="flex: 1; min-width: 200px;">
      <label style="display: block; font-weight: 500; margin-bottom: 0.25rem;">Image URL / path</label>
      <input type="text" name="image_url" required placeholder="/static/img/example.jpg" style="width: 100%; padding: 0.5rem;">
    </div>
    <div style="flex: 1; min-width: 120px;">
      <label style="display: block; font-weight: 500; margin-bottom: 0.25rem;">Alt text</label>
      <input type="text" name="alt_text" placeholder="Alt description" style="width: 100%; padding: 0.5rem;">
    </div>
    <button type="submit" class="btn btn-primary">Add</button>
  </form>
</div>
<div class="card" style="overflow-x: auto;">
  <table style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr style="background: #f3f4f6;">
        <th style="text-align: left; padding: 0.5rem;">ID</th>
        <th style="text-align: left; padding: 0.5rem;">URL</th>
        <th style="text-align: left; padding: 0.5rem;">Alt</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for img in images %}
      <tr style="border-bottom: 1px solid #e5e7eb;">
        <td style="padding: 0.5rem;">{{ img.id }}</td>
        <td style="padding: 0.5rem;"><code>{{ img.url }}</code></td>
        <td style="padding: 0.5rem;">{{ img.alt }}</td>
        <td style="padding: 0.5rem; text-align: right;">
          <form method="post" action="{{ url_for('admin.product_images_delete', product_id=product.id, image_id=img.id) }}" style="display: inline;" onsubmit="return confirm('Remove this image?');">
            <button type="submit" style="background: none; border: none; color: #dc2626; cursor: pointer;">Delete</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="4" style="text-align: center; padding: 1.5rem; color: #6b7280;">No images yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
